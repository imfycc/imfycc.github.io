---
title: é˜¿é‡Œäº‘å…è´¹è¯ä¹¦åŸŸåå¯ç”¨ https
date: 2017-07-10 06:58:11
updated: 2017-07-16 11:01:11
overdue: true
tags:
categories: ç¼–ç¨‹
---

{% qnimg https.jpg 'alt:iyearn.top çš„ https è¯ä¹¦' %}

ğŸ˜„  ç»™åŸŸååŠ äº†ä¸ªå°ç»¿é”

### å…³äº https
>è¶…æ–‡æœ¬ä¼ è¾“å®‰å…¨åè®®ï¼ˆHypertext Transfer Protocol Secureï¼‰æ˜¯ä¸€ç§é€šè¿‡è®¡ç®—æœºç½‘ç»œè¿›è¡Œå®‰å…¨é€šä¿¡çš„ä¼ è¾“åè®®ã€‚HTTPSç»ç”±HTTPè¿›è¡Œé€šä¿¡ï¼Œä½†åˆ©ç”¨SSL/TLSæ¥åŠ å¯†æ•°æ®åŒ…ã€‚HTTPSå¼€å‘çš„ä¸»è¦ç›®çš„ï¼Œæ˜¯æä¾›å¯¹ç½‘ç«™æœåŠ¡å™¨çš„èº«ä»½è®¤è¯ï¼Œä¿æŠ¤äº¤æ¢æ•°æ®çš„éšç§ä¸å®Œæ•´æ€§ã€‚

ä¸€å¥è¯ï¼Œå°±æ˜¯æ›´åŠ å®‰å…¨ã€‚æ¯”å¦‚ç”µä¿¡è¿è¥å•†çš„å¹¿å‘ŠåŠ«æŒï¼Œhttps å°±å¯ä»¥æœç»ã€‚


**æœ‰åˆ©å¿…æœ‰å¼Šï¼Œä½¿ç”¨ https çš„ç¼ºç‚¹**  ğŸ˜­

1ã€å¢åŠ é¢å¤–è´¹ç”¨ï¼šè™½ç„¶ä¹Ÿæœ‰å…è´¹çš„SSLè¯ä¹¦ï¼Œä½†æ˜¯è¦æƒ³é•¿æœŸçš„è¿è¥ç½‘ç«™ï¼Œè¿˜æ˜¯è¦è´­ä¹°æ”¶è´¹çš„SSLã€‚

2ã€ç½‘ç«™è®¿é—®é€Ÿåº¦å˜æ…¢ï¼šæ® ACM CoNEXT æ•°æ®æ˜¾ç¤ºï¼Œä½¿ç”¨HTTPSåè®®ä¼šä½¿é¡µé¢çš„åŠ è½½æ—¶é—´å»¶é•¿è¿‘50%ï¼ˆå¯ä»¥ä½¿ç”¨ CDN åŠ é€Ÿéƒ¨åˆ†è§£å†³ ğŸ˜˜ ï¼‰ï¼Œå¢åŠ 10%åˆ°20%çš„è€—ç”µã€‚æ­¤å¤–ï¼ŒHTTPSåè®®è¿˜ä¼šå½±å“ç¼“å­˜ï¼Œå¢åŠ æ•°æ®å¼€é”€å’ŒåŠŸè€—ã€‚HTTPS è¿æ¥æœåŠ¡å™¨ç«¯èµ„æºå ç”¨é«˜å¾ˆå¤šã€‚

3ã€ä¸èƒ½è°ƒç”¨httpçš„èµ„æºï¼šhttpsç½‘ç«™æ— æ³•è°ƒç”¨ä»»ä½•httpçš„èµ„æºã€‚

è¿™ç¯‡æ–‡ç« ä¸å…·æœ‰é€šç”¨æ€§ï¼Œå¯ä»¥çœ‹æˆ‘çš„è¿™ç¯‡æ–‡ç« [å¦‚ä½•ç»™ç½‘ç«™æ·»åŠ å…è´¹çš„ https è¯ä¹¦](https://hufangyun.com/2019/https-config/)

### é˜¿é‡Œäº‘ç”³è¯· https è¯ä¹¦
è…¾è®¯äº‘ä¹Ÿæœ‰ç›¸åŒçš„å…è´¹è¯ä¹¦åŠŸèƒ½ã€‚å¦‚æœä½¿ç”¨è…¾è®¯äº‘çš„æœåŠ¡å™¨ï¼Œå¯ä»¥é€‰æ‹©ä½¿ç”¨è…¾è®¯äº‘çš„å…è´¹è¯ä¹¦ã€‚ğŸ˜ƒ

å¦‚ä¸‹å›¾ï¼Œé€‰æ‹©è¯ä¹¦æœåŠ¡ï¼Œè¿›å…¥åï¼Œé€‰æ‹© â€œè´­ä¹°è¯ä¹¦â€ï¼Œç„¶åé€‰æ‹© â€œå…è´¹å‹DV SSLâ€ï¼Œä»·æ ¼å°±è‡ªåŠ¨å˜æˆé›¶äº†ã€‚ğŸ˜‰

{% qnimg aliyun-https-1.jpg 'alt:é˜¿é‡Œäº‘è¯ä¹¦' extend:?imageView2/2/w/500 %}

{% qnimg aliyun-https-2.jpg 'alt:é˜¿é‡Œäº‘è¯ä¹¦è´­ä¹°' extend:?imageView2/2/w/500 %}

æœ‰æ•ˆæœŸæ˜¯ä¸€å¹´ï¼Œè€Œä¸”åªèƒ½ç»‘å®šä¸€ä¸ªåŸŸåã€‚ç»‘å®šåœ¨ä¸»åŸŸä¸Šï¼Œå­åŸŸåæ˜¯ä¸èƒ½ä½¿ç”¨çš„ã€‚ğŸ˜µ

éœ€è¦å¡«å†™çš„å°±æ˜¯é‚®ç®±ã€å§“åä¸€ç±»çš„ä¸ªäººä¿¡æ¯ï¼ŒéªŒè¯é€‰æ‹© DNS è¯ä¹¦æ˜¯è‡ªåŠ¨ç­¾å‘çš„ï¼Œæ‰€ä»¥åŸºæœ¬å¡«å®Œå°±è‡ªåŠ¨ç”³è¯·æˆåŠŸäº†ã€‚

å¦‚æœåŸŸåçš„ DNS è§£æä¹Ÿä½¿ç”¨çš„é˜¿é‡Œäº‘çš„ï¼Œé˜¿é‡Œäº‘ä¼šè‡ªåŠ¨æ·»åŠ ä¸€æ¡ DNS è§£æç”¨åšè¯ä¹¦éªŒè¯ã€‚å¦‚æœä½¿ç”¨çš„éé˜¿é‡Œäº‘çš„åŸŸåè§£æï¼Œéœ€è¦è‡ªå·±æ‰‹åŠ¨æ·»åŠ ã€‚ğŸ˜

ç„¶åæ ¹æ®é˜¿é‡Œäº‘çš„æç¤ºé…ç½® `nginx`

ä¸‹è½½è¯ä¹¦ï¼Œç„¶åå°†è¯ä¹¦ä¸Šä¼ åˆ°æœåŠ¡å™¨ `/etc/nginx/cert` ç›®å½•ä¸‹ã€‚
ï¼ˆæ–‡ä»¶ä¸Šä¼ æœåŠ¡å™¨å¯ä»¥å‚è€ƒæˆ‘è¿™ç¯‡[æ–‡ç« ](https://hufangyun.com/2015/linux-file-upload/)
ï¼‰ğŸ˜ƒ
#### è®¿é—® `http` è‡ªåŠ¨è·³è½¬åˆ° `https`

æˆ‘æ˜¯ä½¿ç”¨ `nginx 497` é”™è¯¯ç å¤„ç†çš„,ä½†æ˜¯è¿™ç§æ–¹å¼è€—è´¹æœåŠ¡å™¨èµ„æºï¼Œå¦‚æœæƒ³ä½¿ç”¨å…¶ä»–çš„æ–¹å¼å¯ä»¥å‚è€ƒæ–‡ç« æœ«å°¾çš„[æ‰©å±•é˜…è¯»](#æ‰©å±•é˜…è¯») ã€‚ ğŸ˜‹

**æ€è·¯**

å½“ç«™ç‚¹åªå…è®¸ `https` è®¿é—®æ—¶ï¼Œç”¨ `http` è®¿é—® `nginx` ä¼šæŠ¥å‡º497é”™è¯¯ç ï¼Œç„¶åæˆ‘ä»¬åˆ©ç”¨ `error_page` å‘½ä»¤å°†497çŠ¶æ€ç çš„é“¾æ¥é‡å®šå‘åˆ°æˆ‘ä»¬çš„åŸŸåä¸Š

é…ç½® nginx å¦‚ä¸‹ï¼š

```nginx
server {
	listen 80 default_server;
	listen [::]:80 default_server;

  listen 443;
    #ä¸ºä¸€ä¸ªserver{......}å¼€å¯sslæ”¯æŒ
  	ssl on;
  	root html;
  	index index.html index.htm;
    #æŒ‡å®šPEMæ ¼å¼çš„è¯ä¹¦æ–‡ä»¶
  	ssl_certificate   cert/214190650300318.pem;
    #æŒ‡å®šPEMæ ¼å¼çš„ç§é’¥æ–‡ä»¶
  	ssl_certificate_key  cert/214190650300318.key;
  	ssl_session_timeout 5m;
  	ssl_ciphers ECDHE-R-SHA256:ECRC4;
  	ssl_protocols TLSv1 TLSv1.1 TLSv1.2;
  	ssl_prefer_server_ciphers on;

	server_name localhost;

        #http => https è®©httpè¯·æ±‚é‡å®šå‘åˆ°httpsè¯·æ±‚
        error_page 497  https://$host$uri;
}
```

### æ‰©å±•é˜…è¯»
 [nginxå¼ºåˆ¶ä½¿ç”¨httpsè®¿é—®(httpè·³è½¬åˆ°https)](http://blog.csdn.net/wzy_1988/article/details/8549290)
